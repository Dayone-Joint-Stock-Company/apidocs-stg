{"version":3,"file":"biz-api-DoJmX11k.js","sources":["../../pages/biz/images/biz-api-flow.png","../../pages/biz/biz-api.md"],"sourcesContent":["export default \"__VITE_ASSET__CXte7G7z__\"","---\ntitle: Cách tích hợp Got It Biz API\n---\n\nĐây là tài liệu kỹ thuật kết nối hệ thống Got It, được sử dụng để phát hành voucher trên nhiều nền tảng khác nhau: Desktop Website, Mobile Website, Mobile Application, ... Yêu cầu bắt buộc là API Got It phải được gọi từ server của khách hàng. Không được gọi từ Javascript phía end-user.\n\n## Lịch sử tài liệu\n\n| **Ngày cập nhật** | **Nội dung cập nhật** |\n| --- | --- |\n| 02/10/2023 | Thêm mới |\n\n## Quy trình tích hợp\n\nCác bước cơ bản để tích hợp với Got It:\n\n- **Bước 1:** Đăng ký tài khoản doanh nghiệp. Bạn cần hoàn thành quá trình đăng ký với đầy đủ thông tin, trạng thái mặc định của doanh nghiệp sẽ là chưa xác thực. Thông tin tích hợp mặc định sẽ môi trường Stg\n- **Bước 2:** Tiến hành tích hợp theo tài liệu được cung cấp.\n- **Bước 3:** Đơn vị tiến hành kiểm thử phần mềm, tham khảo các testcase của Got It cung cấp để kiểm tra các lỗi phổ biến trong quá trình phát hành voucher.\n- **Bước 4:** Sau khi đơn vị kinh doanh hoàn thành tích hợp và kiểm thử, Got It sẽ xác thực dịch vụ của bạn trên môi trường test trước khi lên production.\n- **Bước 5:** Sau khi được xác nhận, tài khoản doanh nghiệp của bạn sẽ được chuyển sang trạng thái đã xác thực.\n- **Bước 6:** Thay đổi các thông tin tích hợp theo môi trường production.\n\n## Thông tin tích hợp\n\nGot It cung cấp cho đơn vị kinh doanh hai môi trường để tích hợp với Biz API:\n\n- **Stagging**: Sử dụng trong quá trình tích hợp: xây dựng tính năng, kiểm thử, debug, v.v…\n- **Production**: Sử dụng để triển khai cho end user tạo voucher thật.\n\n## Yêu cầu bảo mật\n\n- Sử dụng giao thức TLS v1.2\n\n## Key Credential\n\nTất cả yêu cầu gửi đến phải chứa trường **“X-GI-Authorization”** trên header, API Key do Got It cung cấp. Đây là mã bí mật, duy nhất chỉ cung cấp cho khách hàng, khách hàng có trách nhiệm bảo mật. **Khách hàng để lộ API Key X-GI-Authorization sẽ phải chịu trách nhiệm cho mọi voucher phát sinh từ phía API Key này.**\n\nThông tin này sẽ thay đổi theo từng môi trường, khách hàng nên để chúng trong cấu hình của application.\n\n## Cấu hình HTTP Request\n\n| **Key** | **Dữ liệu** |\n| --- | --- |\n| Content-Type _**(required)**_<br/>Applied to all operations | Luôn luôn là 'application/json'<br/>Default: application.json |\n| Domain _**(required)**_ | Môi trường Staging: [https://api-biz-stg.gotit.vn/](https://api-biz-stg.gotit.vn/)<br/>Môi trường Production: [https://api-biz.gotit.vn/](https://api-biz.gotit.vn/) |\n| Accept-Language | Ngôn ngữ sử dụng cho các trường dạng text. (Ví dụ: tên sản phẩm, điều khoản sử dụng…)<br/>  **en**: Tiếng Anh **vi**: Tiếng Việt |\n\n## Luồng xử lý\n\n![Biz API Flow](./images/biz-api-flow.png)\n\n**Mô tả chi tiết**\n\n(1)(2) Request/Response master data:\n\n- Yêu cầu thông tin để phục vụ cho việc tạo voucher và hiển thị thông tin cho người dùng cuối (end-user).\n- Sử dụng các API ở mục Get master data\n- Các thông tin được mô tả chi tiết ở mục Dữ liệu &amp;amp; Định nghĩa cho từng API\n\n(3)(4) Request issue voucher/Response voucher information:\n\n- Yêu cầu tạo voucher.\n- Sử dụng các API ở mục Transaction.\n\n(5)(6) Request/Response send voucher to end user\n\n- Yêu cầu gửi voucher đến người dùng cuối. Có 2 hình thức: sms và email.\n- Sử dụng API ở mục Send SMS\n\n(7) Request use voucher\n\n- Người dùng đến yêu cầu sử dụng và cung cấp thông tin voucher cho đối tác Merchant của Got It.\n\n(8)(9) Request/Response redeem voucher\n\n- Đối tác kiểm tra voucher hợp lệ và đánh dấu sử dụng.\n\n(10) Response result\n\n- Đối tác phản hồi lại kết quả cho người dùng cuối\n\n(11)(12) Request/Response check voucher\n\n- Kiểm tra trạng thái voucher\n- Sử dụng API ở mục Phát hành voucher.\n\n(13) Got It gửi thông báo cập nhật trạng thái voucher (khi voucher có sự thay đổi về trạng thái)\n\n## Bảng trạng thái voucher\n\n| **Mã** | **Tên trạng thái** | **Mô tả** |\n| --- | --- | --- |\n| 1 | New | Voucher đã được phát hành và đã gửi trả qua API response |\n| 2 | Sent | Voucher được gửi bằng Email hoặc SMS (sử dụng API gửi voucher do Got It cung cấp) |\n| 3 | Opened | Voucher link đã được mở (do user) |\n| 4 | Used | Voucher đã được sử dụng (được đổi bởi các cửa hàng vật lý của người bán hoặc các dịch vụ trực tuyến đối tác (ví dụ: nạp tiền điện thoại,...) |\n| 5 | Downloaded | Trong trường hợp voucher được phát hành bằng Got It Biz Portal: thì ý nghĩa là đã download file chứa thông tin voucher |\n| 8 | Expired | Voucher đã hết hạn sử dụng |\n| 9 | Cancelled | Voucher đã bị hủy (Got It hủy) |\n| 10 | Splitted | Splittable voucher đã được tách.  Voucher A khi bị tách, sẽ phát sinh các voucher con B, C, D... Khi đó Voucher A sẽ có state &#x3D; 10 |\n| 0 | Inactive/ New | Voucher đang chờ ngày được kích hoạt/ Voucher đang được reserved, chờ sử dụng |\n\n## Bảng mã lỗi\n\n- _API Key Related 00XX (Lỗi liên quan đến API Key)_\n- _Parameter Related 10XX (Lỗi liên quan đến cú pháp tham số truyền vào)_\n- _Value Related 20XX (Lỗi liên quan đến giá trị tham số)_\n- _Other 99XX_\n\nChi tiết tham khảo [Biz API Error Codes](biz-api-errorcodes)\n\n## Đảm bảo an toàn thông tin\n\nĐể đảm bảo an toàn thông tin khi phát hành voucher, Got It áp dụng các biện pháp như sau:\n\n- Whitelist IP của client khi gọi API\n- Thêm key vào header khi gọi API\n- Mã hóa bất đối xứng RSA (hai chiều)\n\nChi tiết tham khảo [An toàn thông tin với Biz API](biz-api-security)\n\n## Danh sách API\n\nBao gồm:\n\n### Các API lấy danh mục\n\nDùng để lấy danh mục &quot;Ngành&quot; (Category), &quot;Thương hiệu&quot; (Brand) và &quot;Sản phẩm&quot; (Product)\n\n| **API** | **Method** | **Path** |\n| --- | --- | --- |\n| Category | GET | api/v4.0/categories |\n| Category by Product | GET |  |\n| Brand | GET | api/v4.0/brands |\n| Brand by Product | GET |  |\n| Brand by Category | GET | api/v4.0/categories/:categoryId/brands |\n| Brand detail | GET | api/v4.0/brands/:brandId |\n| Product list | GET | api/v4.0/products |\n| Product detail | GET | api/v4.0/products/:productId |\n| Store by Product | GET | api/v4.0/products/:productId/stores |\n\n### Các API phát hành/kiểm tra thông tin voucher\n\n| **API** | **Method** | **Path** |\n| --- | --- | --- |\n| Phát hành voucher link v (single voucher link) | POST | api/v4.0/vouchers/v |\n| Phát hành voucher link g (group voucher link) | POST | api/v4.0/vouchers/g |\n| Phát hành voucher link e (e-wallet voucher link) | POST | api/v4.0/vouchers/e |\n| Kiểm tra (nhiều) voucher bằng transactionRefId | GET | api/v4.0/vouchers/multiple/status/:transactionRefId |\n\n### Các API gửi voucher voucher\n\ndùng để gửi voucher đến người dùng cuối\n\n| **API** | **Method** | **Path** |\n| --- | --- | --- |\n| Send via Email | POST | api/v4.0/vouchers/send/email |\n| Send via SMS | POST | /api/v4.0/vouchers/send/sms |\n\n## Cấu trúc response API\n\n| **Dữ liệu** | **Kiểu** | **Mô tả** |\n| --- | --- | --- |\n| status | String | HTTP status |\n| statusCode | Number | HTTP Status Code |\n| error | String | Mã lỗi (nếu có) |\n| message | String | Thông báo lỗi (nếu có) |\n| data | Array object | Chứa data trả về. Trong trường hợp fail, trả về \\[\\] |\n"],"names":["_rehypeMdxImportMedia0","_jsx","_components"],"mappings":"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"}