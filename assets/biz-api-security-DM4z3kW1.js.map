{"version":3,"file":"biz-api-security-DM4z3kW1.js","sources":["../../pages/biz/images/biz-api-signature.png","../../pages/biz/biz-api-security.md"],"sourcesContent":["export default \"__VITE_ASSET__lV24PVwG__\"","---\ntitle: An toàn thông tin với Biz API\n---\n\nĐể đảm bảo an toàn thông tin khi phát hành voucher, Got It áp dụng các biện pháp như sau:\n\n## Whitelist IP của client khi gọi API\n\nMôi trường stg:\n- Nếu IP location ngoài Việt Nam: Client cầng cung cấp IP để Got It add vào whitelist\n\nMôi trường production:\n- Chỉ các IP trong whitelist của Got It mới call được API nên client cần cung cấp IP.\n- Limit max 3000 request trong 5 phút.\n\n## Thêm key vào header khi gọi API\n\nXem phần _**[Key Credential](#key-credential)**_ phía dưới\n\n## Mã hóa bất đối xứng RSA (hai chiều)\n\nĐể chứng thực dữ liệu khi client call API. Got It cung cấp cơ chế mã hóa bất đối xứng RSA hay còn gọi là hệ mã hóa public key, nó sử dụng một cặp key để mã hóa và giải mã: **public key (khóa công khai) dùng để mã hóa** và **private key dùng để giải mã**.\n\nGot It và đối tác sẽ tạo ra cặp private và public key có độ dài là **2048 bit**, 2 bên sẽ trao đổi public key.\n\n- Khi client call đến Got It, client sẽ dùng private key của mình ký trên dữ liệu gửi đi theo quy tắc được Got It định nghĩa. Got It sẽ dùng public key mà đối tác cung cấp để xác thucwj dữ liệu là đúng và được gửi từ phía client.\n- Got It sẽ dùng private key của mình ký trên dữ liệu trả về, đối tác sẽ dùng public key Got It cung cấp để xác thực chữ ký.\n\n### Các bước tích hợp\n\n1. GotIt và client sẽ cùng tạo cặp private và public key theo **chuẩn RSA 2048 bit** và trao đổi public key với nhau. Public key sẽ có dạng như sau:\n\n```\n-----BEGIN PUBLIC KEY-----\nMIIBIjANBgkqhkiG9w0BAQEFAAOCAQ8AMIIBCgKCAQEAvjVsj2Ry7hBDJZYky+Oi\nZZTN49MUeEbXEOrQzuckWi3fQDSH7s0F7rG3gLX33W0C0SeEOUty1TIZyfbpCMuU\n……………………………………………………………………………………………………………………………\n………………………………………………………………………………………………………………………………..\nelJ7PfaAZT2m/qT+bsvtMo2nSFEJ1SgyinYZTR5jyyJXVRydUR+hNanSNgXctMSb\nRwIDAQAB\n-----END PUBLIC KEY-----\n\n```\n\n2\\. Khi gọi API `/api/v4.0/vouchers/v`, `/api/v4.0/vouchers/g`, `/api/v4.0/vouchers/e`, `/v4.0/vouchers/multiple/status/:transactionRefId`, phía client cần truyền thêm tham số _**signature (được mã hóa SHA256 with RSA và base64)**_ vào body params. GotIt sẽ xác thực signature này, nếu đúng sẽ tiến hành xử lý API, nếu sai sẽ báo lỗi (`3003: The signature is incorrect`).\n\n3\\. Signature được tạo từ access code có cú pháp tương ứng cho các API như sau\n\n- Cú pháp access code khi gọi API `/api/v4.0/vouchers/v`, `/api/v4.0/vouchers/g`:\n\n```\n[API Key]|orderName|expiryDate|transactionRefId \n```\n\n- Cú pháp access code khi gọi API `/api/v4.0/vouchers/e`:\n\n```\n[API Key]|transactionRefId \n```\n\n- Cú pháp access code khi gọi API `/v4.0/vouchers/multiple/status/:transactionRefId`:\n\n```\n[API Key]|transactionRefId \n```  \n\n4\\. Response từ Got It sẽ đính kèm chữ ký của Got It ở header, đối tác sẽ xác thực chữ ký dựa trên public key của Got It cung cấp và toàn bộ nội dung response.\n\n### Mã hóa thông tin voucher dùng client public key\n\nGot It dùng client public key để mã hóa dữ liệu trả về. Client sẽ dùng private key để giải mã. Voucher trả về sẽ có dạng như sau:\n\n![Biz API Encryption With Public Key](./images/biz-api-signature.png)\n\n## Key Credential\n\nTất cả yêu cầu gửi đến phải chứa trường **'X-GI-Authorization'** trên header, API Key do Got It cung cấp. Đây là mã bí mật, duy nhất chỉ cung cấp cho khách hàng, khách hàng có trách nhiệm bảo mật. **Khách hàng để lộ API Key X-GI-Authorization sẽ phải chịu trách nhiệm cho mọi voucher phát sinh từ phía API Key này.**\n\nThông tin này sẽ thay đổi theo từng môi trường, khách hàng nên để chúng trong cấu hình của application.\n"],"names":["_rehypeMdxImportMedia0","_jsx","_components"],"mappings":"sDAAA,MAAeA,EAAA,65BCIf,SAAA;uDAEG,SAAA;aAEH,SAAA;;cACE,SAAA;;aAEF,SAAA;;cACE,SAAA;cACA,SAAA;;mDAEC,SAAA;cAEH,SAAA,CAAA,YAAAC,MAAAC,EAAA,GAAA,qEAAa,SAAA,oBAAmC,CAAA,EAAA,YAAA;qDAE7C,SAAA;cAEH,SAAA,CAAA,+KAAAD,MAAAC,EAAA,OAAA,CAA8K,SAAA,4CAA4C,CAAA,EAAA,OAAAD,MAAAC,EAAA,OAAA,CAAM,SAAA,6BAA6B,CAAA,EAAA,GAAA;cAE7P,SAAA,CAAA,sEAAAD,MAAAC,EAAA,OAAA,CAAqE,SAAA,UAAU,CAAA,EAAA,iCAAA;;cAE7E,SAAA;cACA,SAAA;;qCAEE,SAAA;;eAED,SAAA,CAAA,8DAAAD,MAAAC,EAAA,OAAA,CAA6D,SAAA,oBAAoB,CAAA,EAAA,kEAAA;;;;;;;;;;;;cAcpF,SAAA,CAAA,kBAAAD,MAAAC,EAAA,KAAA,WAAgB,SAAA,sBAAsB,CAAA,EAAA,KAAAD,MAAAC,EAAA,KAAA,WAAE,SAAA,sBAAsB,CAAA,EAAA,KAAAD,MAAAC,EAAA,KAAA,WAAE,SAAA,sBAAsB,CAAA,EAAA,KAAAD,MAAAC,EAAA,KAAA,WAAE,SAAA,kDAAkD,CAAA,EAAA,yCAAAD,MAAAC,EAAA,GAAA,0BAAyC,SAAA,qDAAoD,CAAA,EAAA,2GAAAD,MAAAC,EAAA,KAAA,WAAwG,SAAA,kCAAkC,CAAA,EAAA,IAAA;aAEjX,SAAA;;eAEE,SAAA,CAAA,mCAAAD,MAAAC,EAAA,KAAA,WAAgC,SAAA,sBAAsB,CAAA,EAAA,KAAAD,MAAAC,EAAA,KAAA,WAAE,SAAA,sBAAsB,CAAA,EAAA,GAAA;;;;;eAM9E,SAAA,CAAA,mCAAAD,MAAAC,EAAA,KAAA,WAAgC,SAAA,sBAAsB,CAAA,EAAA,GAAA;;;;;eAMtD,SAAA,CAAA,mCAAAD,MAAAC,EAAA,KAAA,WAAgC,SAAA,kDAAkD,CAAA,EAAA,GAAA;;;;aAMpF,SAAA;mEAEI,SAAA;aAEJ,SAAA;;kCAIG,SAAA;cAEH,SAAA,CAAA,2CAAAD,MAAAC,EAAA,OAAA,CAA0C,SAAA,sBAAsB,CAAA,EAAA,wIAAAD,MAAAC,EAAA,OAAA,CAAuI,SAAA;aAEvM,SAAA"}